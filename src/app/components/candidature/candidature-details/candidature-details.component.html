<div class="background-container">
<app-navbar></app-navbar>
<div class="container main-container py-4 ">
    <div class="row g-0 p-4 ju">
        <div class="col-lg-8 col-sm-12 text-start ">
            <!-- ENUNCIADO -->
            <div class="p-1">

                <!-- TITULO/NOMBRE CANDIDATURA -->
                <div class="d-flex align-items-center ">
                    <!-- Titulo de la candidatura, lleva un control por si el titulo fuera muy largo que no rompa la distribucion de la vista 
                        (un exceso de caracteres se muestra con puntos suspensivos) -->
                    <h3 class="text-truncate text-truncate-overflow mb-4" *ngIf="!modeEditTitle" title="{{data?.title.length>28 ? data?.title : ''}}">{{data?.title}}</h3>
                    <div class="d-flex w-75 align-items-center" *ngIf="modeEditTitle">
                        <!-- Input text que añade como valor base el contenido que ya tiene -->
                        <input type="text" class="form-control" placeholder="Nombre Candidatura" value="{{data?.title}}" aria-label="Candidatura" aria-describedby="Candidatura">
                        <!-- Boton de confirmacion del titulo -->
                        <button class="btn btn-light mx-1">
                            <span class="material-symbols-outlined line-height-base text-start autowidth">
                                check_box
                            </span>
                        </button>
                    </div>
                    <!-- Boton de edicion para el titulo -->
                    <div class="" *ngIf="typeUser=='rrhh'">
                        <img src="../../../../assets/icon-edit.png" class="cursor-pointer mx-2 col-1 d-flex justify-content-end icon-container"
                            (click)="controlModes('title')">
                    </div>
                </div>
                <!-- FIN---TITULO/NOMBRE CANDIDATURA--- -->

                <!-- INFO CANDIDATURA -->
                <div class="mt-3" *ngIf="typeUser=='rrhh'">
                        <!-- Boton de confirmacion que aplicaria los cambios -->
                        <button *ngIf="modeEditInfoCandidacy" class="btn btn-light mx-1">
                            <!-- Icon from google -->
                            <span class="material-symbols-outlined line-height-base text-start autowidth">
                                check_box
                            </span>
                        </button>
                        <!-- Boton edicion de los 3 dialogos debajo del titulo (solicitantes, jornada...) -->
                        <div class="" *ngIf="typeUser=='rrhh'">
                            <img src="../../../../assets/icon-edit.png" class="cursor-pointer mx-2 col-1 d-flex justify-content-end icon-container"
                                (click)="controlModes('infocandidacy')">
                        </div>
                </div>
                <div class="row row-cols-1 row-cols-xs-1 row-cols-sm-3 px-4 justify-content-between">
                    
                    <div class="col p-0 text-center text-break"><span class="fw-bold">Localidad</span>
                        <div class="w-100 h-100 p-2 border-top">
                            <!-- si no se activa la edicion tan solo muestra la info -->
                            <div *ngIf="!modeEditInfoCandidacy">
                                {{data?.location}}
                            </div>
                            <!-- Si edicion esta activada muestra un inputtext que añade como valor base su contenido -->
                            <div *ngIf="modeEditInfoCandidacy">
                                <input type="text" class="form-control" placeholder="Localizacion" value="{{data?.location}}" aria-label="Localizacion" aria-describedby="Localizacion">
                            </div>
                        </div>
                    </div>
                    <div class="col p-0 text-center text-break">
                        <span class="fw-bold">Jornada</span> 
                        <div class="w-100 h-100 p-2 border-top">
                            <!-- si no se activa la edicion tan solo muestra la info -->
                            <div *ngIf="!modeEditInfoCandidacy">
                                {{data?.typeworkingday}}
                            </div>
                            <!-- Si edicion esta activada muestra un inputtext que añade como valor base su contenido -->
                            <div *ngIf="modeEditInfoCandidacy">
                                <input type="text" class="form-control" placeholder="Jornada" value="{{data?.typeworkingday}}" aria-label="Jornada" aria-describedby="Jornada">
                            </div>
                        </div>
                    </div>
                    <div class="col p-0 text-center text-break">
                        <span class="fw-bold">solicitantes</span> 
                        <div class="w-100 h-100 p-2 border-top">
                            <!-- si no se activa la edicion tan solo muestra la info -->
                            <div *ngIf="!modeEditInfoCandidacy">
                                {{data?.applicants}}
                            </div>
                            <!-- Si edicion esta activada muestra un inputtext que añade como valor base su contenido -->
                            <div *ngIf="modeEditInfoCandidacy">
                                <input type="text" class="form-control" placeholder="Solicitantes" value="{{data?.applicants}}" aria-label="Solicitantes" aria-describedby="Solicitantes">
                            </div>
                        </div>
                    </div>
                </div>
                <!-- FIN---INFO CANDIDATURA--- -->
            </div>

            <!-- DESCRIPCION -->
            <div class="my-3 px-3 mb-4 p-3">
                <div class="d-flex align-items-center">
                    <h5>Descripcion</h5>
                    <div class="d-flex px-1 ">
                        <!-- Boton de añadir se activa si edicion esta activada -->
                        <button class="btn btn-light  mx-1" *ngIf="modeEditDescription">
                            <span class="material-symbols-outlined line-height-base text-start autowidth">check_box</span>
                        </button>
                        <!-- Boton de edicion -->
                        <div class="" *ngIf="typeUser=='rrhh'">
                            <img src="../../../../assets/icon-edit.png" class="cursor-pointer mx-2 col-1 d-flex justify-content-end icon-container"
                                (click)="controlModes('description')">
                        </div>
                    </div>
                </div>
                <!-- si no se activa la edicion tan solo muestra la info -->
                <div class="" *ngIf="!modeEditDescription">
                    {{data?.description}}
                </div>
                <!-- Si edicion esta activada muestra un textarea -->
                <div class="my-1 " *ngIf="modeEditDescription">
                    <textarea class=" form-control" aria-label="With textarea">{{data?.description}}</textarea>
                </div>
            </div>

            <!-- REQUERIMIENTOS -->
            <div class="my-3 px-3 mb-4">
                <div class="d-flex align-items-center">
                    <h5>Requerimientos</h5>
                    <div class="d-flex px-1">
                        <!-- Boton de añadir se activa si edicion esta activada -->
                        <button class="btn btn-light mx-1" *ngIf="modeEditRequeriments">
                            <span class="material-symbols-outlined line-height-base text-start autowidth">check_box</span>
                        </button>
                        <!-- Boton de edicion -->
                        <div class="" *ngIf="typeUser=='rrhh'">
                            <img src="../../../../assets/icon-edit.png" class="cursor-pointer mx-2 col-1 d-flex justify-content-end icon-container"
                                (click)="controlModes('requeriments')">
                        </div>
                    </div>
                    
                </div>
                <!-- si no se activa la edicion tan solo mustra la info -->
                <div *ngIf="!modeEditRequeriments">
                    {{data?.requirements}}
                </div>
                <!-- Si edicion esta activada muestra un textarea -->
                <div class="my-1" *ngIf="modeEditRequeriments">
                    <textarea class="form-control" aria-label="With textarea">{{data?.requirements}}</textarea>
                </div>
            </div>

            <!-- RESPONSABILIDADES -->
            <div class="my-3 px-3">
                <div class="d-flex">
                    <h5>Responsabilidades</h5>
                    <div class="d-flex px-1">
                        <!-- Boton de añadir se activa si edicion esta activada -->
                        <button class="btn btn-light mx-1" *ngIf="modeEditResponsibilities">
                            <span class="material-symbols-outlined line-height-base text-start autowidth">check_box</span>
                        </button>
                        <!-- Boton de edicion -->
                        <div class="" *ngIf="typeUser=='rrhh'">
                            <img src="../../../../assets/icon-edit.png" class="cursor-pointer mx-2 col-1 d-flex justify-content-end icon-container"
                                (click)="controlModes('responsabilities')">
                        </div>
                    </div>
                </div>
                <!-- si no se activa la edicion tan solo mustra la info -->
                <div *ngIf="!modeEditResponsibilities">
                    {{data?.responsibilities}}
                </div>
                <!-- Si edicion esta activada muestra un textarea -->
                <div class="my-1" *ngIf="modeEditResponsibilities">
                    <textarea class="form-control" aria-label="With textarea">{{data?.responsibilities}}</textarea>
                </div>
            </div>
        </div>
        <div class="col-lg-4 col-sm-12 h-50 p-4">
            <!-- Muestra las skills de la candidatura -->
            <div><app-skills [tableData]="'candidature'" [rol]="typeUser"></app-skills></div>
            <div class="d-flex flex-column justify-content-center align-items-center mt-3" *ngIf="typeUser == 'candidate'"> 
                <div class="w-75 h-custom mt-3">
                    <!-- Botones para usuario, le deja aplicar a la oferta ¿o dejar de aplicar? -->
                    <button class="btn btn-success w-100 h-100 btn-lg " *ngIf="userSubscribed">Aplicado</button>
                    <button class="btn btn-primary w-100 h-100 btn-lg " *ngIf="!userSubscribed">Aplicar</button>
                </div>
                <div class="w-50 mt-5" *ngIf="userSubscribed">
                    <!-- Boton para informar a usuario sobre estado de la aplicacion que realizo -->
                    <button class="btn btn-secondary w-100 h-100 btn-lg" *ngIf="userSubscribed">Pendiente</button>
                </div>
            </div>
        </div>
        <div class="mt-5" *ngIf="typeUser == 'candidate'">
            <app-progress-bar [processes]="processes" [processStatus]="processStatus"></app-progress-bar>
        </div>
    </div>
    <!-- Informacion extra segun el usuario -->
    <div class="row g-0 p-5">
        <div *ngIf="typeUser == 'rrhh'"> <app-list-postulated></app-list-postulated></div>
        <div *ngIf="typeUser == 'user'"> proceso (usuario) </div>
    </div>
</div>
</div>